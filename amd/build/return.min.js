define(["jquery","enrol_payment/spin","core/str","core/config","core/ajax"],function(a,b,c,d,e){var f={checkEnrol:function(a,b,c,f,g){e.call([{methodname:"enrol_payment_check_enrol",args:{courseid:b,paymentid:g},done:function(a){var c=JSON.parse(a);if(c.result===!0)window.location.href=f;else{if(c.result!==!1||!c.reason)return;window.location.href=d.wwwroot+"/enrol/payment/paypalPending.php?id="+b.toString()+"&reason="+c.reason}}.bind(this),fail:alert(c[0])}])},init:function(a,d,e,f){var g=this,h=c.get_strings([{key:"errorcheckingenrolment",component:"enrol_payment"},{key:"errorpaymentpending",component:"enrol_payment"}]);h.done(function(c){var h={lines:13,length:38,width:17,radius:45,scale:.45,corners:1,color:"#000000",fadeColor:"transparent",speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,zIndex:2e9,className:"spinner",shadow:"0 0 1px transparent",position:"relative"},i=document.getElementById("spin-container"),j=new b(h);j.spin(i),g.checkEnrol(d,e,c,a,f),setInterval(function(){g.checkEnrol(d,e,c,a,f)},5e3)})}};return f});